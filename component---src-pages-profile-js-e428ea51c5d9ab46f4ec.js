"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[356],{62941:function(e,t,n){var i=n(96540),a=n(40961),o=n(22058),r=n(10610),s=n(34232);function l(e){return e.substring(2).toLowerCase()}t.A=function(e){var t=e.children,n=e.disableReactTree,u=void 0!==n&&n,c=e.mouseEvent,d=void 0===c?"onClick":c,m=e.onClickAway,h=e.touchEvent,f=void 0===h?"onTouchEnd":h,p=i.useRef(!1),v=i.useRef(null),g=i.useRef(!1),E=i.useRef(!1);i.useEffect((function(){return setTimeout((function(){g.current=!0}),0),function(){g.current=!1}}),[]);var _=i.useCallback((function(e){v.current=a.findDOMNode(e)}),[]),A=(0,r.A)(t.ref,_),b=(0,s.A)((function(e){var t=E.current;if(E.current=!1,g.current&&v.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(p.current)p.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(v.current)>-1;else n=!(0,o.A)(v.current).documentElement.contains(e.target)||v.current.contains(e.target);n||!u&&t||m(e)}})),C=function(e){return function(n){E.current=!0;var i=t.props[e];i&&i(n)}},x={ref:A};return!1!==f&&(x[f]=C(f)),i.useEffect((function(){if(!1!==f){var e=l(f),t=(0,o.A)(v.current),n=function(){p.current=!0};return t.addEventListener(e,b),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,b),t.removeEventListener("touchmove",n)}}}),[b,f]),!1!==d&&(x[d]=C(d)),i.useEffect((function(){if(!1!==d){var e=l(d),t=(0,o.A)(v.current);return t.addEventListener(e,b),function(){t.removeEventListener(e,b)}}}),[b,d]),i.createElement(i.Fragment,null,i.cloneElement(t,x))}},65901:function(e,t,n){var i=n(80045),a=n(64467),o=n(58168),r=n(96540),s=n(57166),l=n(70595),u=n(8597),c=n(62941),d=n(34232),m=n(94124),h=n(82848),f=n(54245),p=n(54129),v=r.forwardRef((function(e,t){var n=e.action,a=e.anchorOrigin,l=(a=void 0===a?{vertical:"bottom",horizontal:"center"}:a).vertical,v=a.horizontal,g=e.autoHideDuration,E=void 0===g?null:g,_=e.children,A=e.classes,b=e.className,C=e.ClickAwayListenerProps,x=e.ContentProps,k=e.disableWindowBlurListener,y=void 0!==k&&k,w=e.message,I=e.onClose,L=e.onEnter,S=e.onEntered,O=e.onEntering,T=e.onExit,F=e.onExited,M=e.onExiting,N=e.onMouseEnter,R=e.onMouseLeave,P=e.open,D=e.resumeHideDuration,W=e.TransitionComponent,B=void 0===W?f.A:W,j=e.transitionDuration,H=void 0===j?{enter:u.p0.enteringScreen,exit:u.p0.leavingScreen}:j,z=e.TransitionProps,G=(0,i.A)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),U=r.useRef(),q=r.useState(!0),X=q[0],Y=q[1],Q=(0,d.A)((function(){I&&I.apply(void 0,arguments)})),V=(0,d.A)((function(e){I&&null!=e&&(clearTimeout(U.current),U.current=setTimeout((function(){Q(null,"timeout")}),e))}));r.useEffect((function(){return P&&V(E),function(){clearTimeout(U.current)}}),[P,E,V]);var J=function(){clearTimeout(U.current)},K=r.useCallback((function(){null!=E&&V(null!=D?D:.5*E)}),[E,D,V]);return r.useEffect((function(){if(!y&&P)return window.addEventListener("focus",K),window.addEventListener("blur",J),function(){window.removeEventListener("focus",K),window.removeEventListener("blur",J)}}),[y,K,P]),!P&&X?null:r.createElement(c.A,(0,o.A)({onClickAway:function(e){I&&I(e,"clickaway")}},C),r.createElement("div",(0,o.A)({className:(0,s.A)(A.root,A["anchorOrigin".concat((0,m.A)(l)).concat((0,m.A)(v))],b),onMouseEnter:function(e){N&&N(e),J()},onMouseLeave:function(e){R&&R(e),K()},ref:t},G),r.createElement(B,(0,o.A)({appear:!0,in:P,onEnter:(0,h.A)((function(){Y(!1)}),L),onEntered:S,onEntering:O,onExit:T,onExited:(0,h.A)((function(){Y(!0)}),F),onExiting:M,timeout:H,direction:"top"===l?"down":"up"},z),_||r.createElement(p.A,(0,o.A)({message:w,action:n},x)))))}));t.A=(0,l.A)((function(e){var t={top:8},n={bottom:8},i={justifyContent:"flex-end"},r={justifyContent:"flex-start"},s={top:24},l={bottom:24},u={right:24},c={left:24},d={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:(0,o.A)({},t,(0,a.A)({},e.breakpoints.up("sm"),(0,o.A)({},s,d))),anchorOriginBottomCenter:(0,o.A)({},n,(0,a.A)({},e.breakpoints.up("sm"),(0,o.A)({},l,d))),anchorOriginTopRight:(0,o.A)({},t,i,(0,a.A)({},e.breakpoints.up("sm"),(0,o.A)({left:"auto"},s,u))),anchorOriginBottomRight:(0,o.A)({},n,i,(0,a.A)({},e.breakpoints.up("sm"),(0,o.A)({left:"auto"},l,u))),anchorOriginTopLeft:(0,o.A)({},t,r,(0,a.A)({},e.breakpoints.up("sm"),(0,o.A)({right:"auto"},s,c))),anchorOriginBottomLeft:(0,o.A)({},n,r,(0,a.A)({},e.breakpoints.up("sm"),(0,o.A)({right:"auto"},l,c)))}}),{flip:!1,name:"MuiSnackbar"})(v)},54129:function(e,t,n){var i=n(80045),a=n(64467),o=n(58168),r=n(96540),s=n(57166),l=n(70595),u=n(61133),c=n(18312),d=r.forwardRef((function(e,t){var n=e.action,a=e.classes,l=e.className,c=e.message,d=e.role,m=void 0===d?"alert":d,h=(0,i.A)(e,["action","classes","className","message","role"]);return r.createElement(u.A,(0,o.A)({role:m,square:!0,elevation:6,className:(0,s.A)(a.root,l),ref:t},h),r.createElement("div",{className:a.message},c),n?r.createElement("div",{className:a.action},n):null)}));t.A=(0,l.A)((function(e){var t="light"===e.palette.type?.8:.98,n=(0,c.tL)(e.palette.background.default,t);return{root:(0,o.A)({},e.typography.body2,(0,a.A)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(d)},67570:function(e,t,n){var i=n(96540),a=n(64283),o=n(52969),r=n(54206),s=n(59503),l=n(27929),u=n(24656),c=n(36894),d=n(69818),m=n(40362);const h=c.default.div.withConfig({displayName:"CourseOptionsEditor__Row",componentId:"sc-15i8a3h-0"})(["margin-bottom:1.5rem;"]),f=c.default.form.withConfig({displayName:"CourseOptionsEditor__Form",componentId:"sc-15i8a3h-1"})([""]),p=c.default.div.withConfig({displayName:"CourseOptionsEditor__InfoBox",componentId:"sc-15i8a3h-2"})(["margin-bottom:2rem;"]),v=c.default.div.withConfig({displayName:"CourseOptionsEditor__FormContainer",componentId:"sc-15i8a3h-3"})(["height:100%;margin-top:2rem;"]),g=(0,c.default)(a.A).withConfig({displayName:"CourseOptionsEditor__WarningBox",componentId:"sc-15i8a3h-4"})(["margin:2rem 0;background:#f1a9a0;padding:1rem;font-weight:bold;"]);class E extends i.Component{constructor(){super(...arguments),this.onClick=async e=>{e.preventDefault(),this.setState({submitting:!0});let t={digital_education_for_all:this.state.digital_education_for_all,use_course_variant:this.state.use_course_variant,course_variant:this.state.course_variant,marketing:this.state.marketing,research:this.state.research};const n={first_name:this.state.first_name,last_name:this.state.last_name,organizational_id:this.state.student_number};try{await(0,l.DG)({extraFields:t,userField:n}),this.setState({submitting:!1}),this.props.onComplete()}catch(i){this.setState({errorObj:i,submitting:!1})}},this.state={submitting:!1,error:!0,errorObj:void 0,digital_education_for_all:!1,marketing:!1,research:void 0,first_name:void 0,last_name:void 0,use_course_variant:void 0,course_variant:"",course_variants:[],email:void 0,student_number:void 0,loading:!0,focused:null},this.handleInput=e=>{const t=e.target.name,n=e.target.value;this.setState({[t]:n},(()=>{this.validate()}))},this.handleCheckboxInput=e=>{const t=e.target.name,n=e.target.checked;this.setState({[t]:n},(()=>{this.validate()}))},this.handleCourseVariantCheckbox=e=>{this.setState({use_course_variant:e.target.checked,course_variant:""},(()=>{this.validate()}))},this.handleFocus=e=>{const t=e.target.name;this.setState({focused:t})},this.handleUnFocus=()=>{this.setState({focused:null})},this.validate=()=>{this.setState((e=>{const t=void 0===e.research,n=e.use_course_variant&&!e.course_variant;return{error:t||n}}))}}async componentDidMount(){var e,t,n,i,a,o,r,s,u;const c=await(0,l.yS)(),d=await(0,l.GF)();let m="t"===(null===(e=c.extra_fields)||void 0===e?void 0:e.use_course_variant),h=null!==(t=null===(n=c.extra_fields)||void 0===n?void 0:n.course_variant)&&void 0!==t?t:"";d.find((e=>e.key===h))||(m=!1,h=""),this.setState({first_name:null===(i=c.user_field)||void 0===i?void 0:i.first_name,last_name:null===(a=c.user_field)||void 0===a?void 0:a.last_name,email:c.email,student_number:null===(o=c.user_field)||void 0===o?void 0:o.organizational_id,digital_education_for_all:"t"===(null===(r=c.extra_fields)||void 0===r?void 0:r.digital_education_for_all),use_course_variant:m,course_variant:h,course_variants:d,marketing:"t"===(null===(s=c.extra_fields)||void 0===s?void 0:s.marketing),research:null===(u=c.extra_fields)||void 0===u?void 0:u.research,loading:!1},(()=>{this.validate()}))}render(){return i.createElement(v,null,i.createElement(u.A,{loading:this.state.loading,heightHint:"490px"},i.createElement(p,null,i.createElement(a.A,null,i.createElement(o.A,null,this.props.t("loggedInWith"),this.state.email)))),i.createElement("h1",null,this.props.t("studentInfo")),i.createElement(f,null,i.createElement(p,null,this.props.t("aboutYourself")),i.createElement(u.A,{loading:this.state.loading,heightHint:"490px"},i.createElement("div",null,i.createElement(h,null,i.createElement(r.A,{variant:"outlined",type:"text",label:this.props.t("firstName"),autoComplete:"given-name",name:"first_name",InputLabelProps:{shrink:this.state.first_name||"first_name"===this.state.focused},fullWidth:!0,value:this.state.first_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),i.createElement(h,null,i.createElement(r.A,{variant:"outlined",type:"text",label:this.props.t("lastName"),autoComplete:"family-name",name:"last_name",InputLabelProps:{shrink:this.state.last_name||"last_name"===this.state.focused},fullWidth:!0,value:this.state.last_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),i.createElement(h,null,i.createElement(r.A,{variant:"outlined",type:"text",label:this.props.t("sid"),name:"student_number",InputLabelProps:{shrink:this.state.student_number||"student_number"===this.state.focused},fullWidth:!0,value:this.state.student_number,onChange:this.handleInput,helperText:this.props.t("nosid"),onFocus:this.handleFocus,onBlur:this.handleUnFocus})))),i.createElement(h,null,i.createElement(s.A,{onClick:this.onClick,disabled:this.state.submitting||this.state.error,loading:this.state.submitting,variant:"contained",color:"primary",fullWidth:!0},this.props.t("save")))),this.state.error&&i.createElement(p,null,i.createElement("b",null,this.props.t("fillRequired"))),this.state.errorObj&&i.createElement(g,null,this.state.errorObj.toString()))}}t.A=(0,m.C)("common")((0,d.A)(E))},9561:function(e,t,n){n.r(t);var i=n(96540),a=n(93673),o=n(36894),r=n(67997),s=n(67570),l=n(41015),u=n(77744),c=n(79875),d=n(27929),m=n(90481),h=n(14978),f=n(65901),p=n(54129);const v=(0,o.default)(p.A).withConfig({displayName:"profile__StyledSnackbarContent",componentId:"sc-3be922-0"})(["background-color:#43a047 !important;"]),g=(0,o.default)(m.g).withConfig({displayName:"profile__StyledIcon",componentId:"sc-3be922-1"})(["margin-right:0.5rem;"]);class E extends i.Component{constructor(){super(...arguments),this.state={successMessage:null},this.onStepComplete=()=>{this.setState({successMessage:"Tiedot tallennettu!"})},this.handleClose=()=>{this.setState({successMessage:null})}}async componentDidMount(){var e;if(!this.context.loggedIn)return;let t=await(0,d.Qv)();void 0===(null==t||null===(e=t.extra_fields)||void 0===e?void 0:e.research)&&(0,l.navigate)("/missing-info")}render(){return this.context.loggedIn?i.createElement(r.A,null,i.createElement(c.A,null,i.createElement(a.A,{title:"Profile"}),i.createElement("h1",null,"Profile"),i.createElement("p",null,"Here you can edit your mooc.fi account settings for this course. Also see your profile in mooc.fi's Test My Code service:"," ",i.createElement("a",{href:"https://tmc.mooc.fi",rel:"noopener noreferrer"},"https://tmc.mooc.fi"),"."),i.createElement(s.A,{onComplete:this.onStepComplete})),i.createElement(f.A,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.successMessage,autoHideDuration:6e3,onClose:this.handleClose},i.createElement(v,{variant:"success",message:i.createElement(i.Fragment,null,i.createElement(g,{icon:h.SGM})," ",i.createElement("span",null,this.state.successMessage))}))):("undefined"!=typeof window&&(0,l.navigate)("/sign-in"),i.createElement("div",null,"Redirecting..."))}}E.contextType=u.Ay,t.default=(0,u.ko)(E)}}]);
//# sourceMappingURL=component---src-pages-profile-js-e428ea51c5d9ab46f4ec.js.map