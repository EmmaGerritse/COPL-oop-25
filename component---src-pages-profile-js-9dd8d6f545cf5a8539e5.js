"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[356],{62941:function(e,t,n){var a=n(96540),i=n(40961),r=n(22058),s=n(10610),o=n(34232);function l(e){return e.substring(2).toLowerCase()}t.A=function(e){var t=e.children,n=e.disableReactTree,c=void 0!==n&&n,u=e.mouseEvent,d=void 0===u?"onClick":u,m=e.onClickAway,h=e.touchEvent,p=void 0===h?"onTouchEnd":h,f=a.useRef(!1),v=a.useRef(null),g=a.useRef(!1),E=a.useRef(!1);a.useEffect((function(){return setTimeout((function(){g.current=!0}),0),function(){g.current=!1}}),[]);var _=a.useCallback((function(e){v.current=i.findDOMNode(e)}),[]),A=(0,s.A)(t.ref,_),b=(0,o.A)((function(e){var t=E.current;if(E.current=!1,g.current&&v.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(f.current)f.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(v.current)>-1;else n=!(0,r.A)(v.current).documentElement.contains(e.target)||v.current.contains(e.target);n||!c&&t||m(e)}})),C=function(e){return function(n){E.current=!0;var a=t.props[e];a&&a(n)}},k={ref:A};return!1!==p&&(k[p]=C(p)),a.useEffect((function(){if(!1!==p){var e=l(p),t=(0,r.A)(v.current),n=function(){f.current=!0};return t.addEventListener(e,b),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,b),t.removeEventListener("touchmove",n)}}}),[b,p]),!1!==d&&(k[d]=C(d)),a.useEffect((function(){if(!1!==d){var e=l(d),t=(0,r.A)(v.current);return t.addEventListener(e,b),function(){t.removeEventListener(e,b)}}}),[b,d]),a.createElement(a.Fragment,null,a.cloneElement(t,k))}},65901:function(e,t,n){var a=n(80045),i=n(64467),r=n(58168),s=n(96540),o=n(57166),l=n(70595),c=n(8597),u=n(62941),d=n(34232),m=n(94124),h=n(82848),p=n(54245),f=n(54129),v=s.forwardRef((function(e,t){var n=e.action,i=e.anchorOrigin,l=(i=void 0===i?{vertical:"bottom",horizontal:"center"}:i).vertical,v=i.horizontal,g=e.autoHideDuration,E=void 0===g?null:g,_=e.children,A=e.classes,b=e.className,C=e.ClickAwayListenerProps,k=e.ContentProps,x=e.disableWindowBlurListener,y=void 0!==x&&x,w=e.message,I=e.onClose,L=e.onEnter,S=e.onEntered,O=e.onEntering,F=e.onExit,T=e.onExited,N=e.onExiting,M=e.onMouseEnter,R=e.onMouseLeave,D=e.open,P=e.resumeHideDuration,W=e.TransitionComponent,B=void 0===W?p.A:W,j=e.transitionDuration,z=void 0===j?{enter:c.p0.enteringScreen,exit:c.p0.leavingScreen}:j,H=e.TransitionProps,G=(0,a.A)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),U=s.useRef(),V=s.useState(!0),Y=V[0],q=V[1],X=(0,d.A)((function(){I&&I.apply(void 0,arguments)})),J=(0,d.A)((function(e){I&&null!=e&&(clearTimeout(U.current),U.current=setTimeout((function(){X(null,"timeout")}),e))}));s.useEffect((function(){return D&&J(E),function(){clearTimeout(U.current)}}),[D,E,J]);var K=function(){clearTimeout(U.current)},Q=s.useCallback((function(){null!=E&&J(null!=P?P:.5*E)}),[E,P,J]);return s.useEffect((function(){if(!y&&D)return window.addEventListener("focus",Q),window.addEventListener("blur",K),function(){window.removeEventListener("focus",Q),window.removeEventListener("blur",K)}}),[y,Q,D]),!D&&Y?null:s.createElement(u.A,(0,r.A)({onClickAway:function(e){I&&I(e,"clickaway")}},C),s.createElement("div",(0,r.A)({className:(0,o.A)(A.root,A["anchorOrigin".concat((0,m.A)(l)).concat((0,m.A)(v))],b),onMouseEnter:function(e){M&&M(e),K()},onMouseLeave:function(e){R&&R(e),Q()},ref:t},G),s.createElement(B,(0,r.A)({appear:!0,in:D,onEnter:(0,h.A)((function(){q(!1)}),L),onEntered:S,onEntering:O,onExit:F,onExited:(0,h.A)((function(){q(!0)}),T),onExiting:N,timeout:z,direction:"top"===l?"down":"up"},H),_||s.createElement(f.A,(0,r.A)({message:w,action:n},k)))))}));t.A=(0,l.A)((function(e){var t={top:8},n={bottom:8},a={justifyContent:"flex-end"},s={justifyContent:"flex-start"},o={top:24},l={bottom:24},c={right:24},u={left:24},d={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:(0,r.A)({},t,(0,i.A)({},e.breakpoints.up("sm"),(0,r.A)({},o,d))),anchorOriginBottomCenter:(0,r.A)({},n,(0,i.A)({},e.breakpoints.up("sm"),(0,r.A)({},l,d))),anchorOriginTopRight:(0,r.A)({},t,a,(0,i.A)({},e.breakpoints.up("sm"),(0,r.A)({left:"auto"},o,c))),anchorOriginBottomRight:(0,r.A)({},n,a,(0,i.A)({},e.breakpoints.up("sm"),(0,r.A)({left:"auto"},l,c))),anchorOriginTopLeft:(0,r.A)({},t,s,(0,i.A)({},e.breakpoints.up("sm"),(0,r.A)({right:"auto"},o,u))),anchorOriginBottomLeft:(0,r.A)({},n,s,(0,i.A)({},e.breakpoints.up("sm"),(0,r.A)({right:"auto"},l,u)))}}),{flip:!1,name:"MuiSnackbar"})(v)},54129:function(e,t,n){var a=n(80045),i=n(64467),r=n(58168),s=n(96540),o=n(57166),l=n(70595),c=n(61133),u=n(18312),d=s.forwardRef((function(e,t){var n=e.action,i=e.classes,l=e.className,u=e.message,d=e.role,m=void 0===d?"alert":d,h=(0,a.A)(e,["action","classes","className","message","role"]);return s.createElement(c.A,(0,r.A)({role:m,square:!0,elevation:6,className:(0,o.A)(i.root,l),ref:t},h),s.createElement("div",{className:i.message},u),n?s.createElement("div",{className:i.action},n):null)}));t.A=(0,l.A)((function(e){var t="light"===e.palette.type?.8:.98,n=(0,u.tL)(e.palette.background.default,t);return{root:(0,r.A)({},e.typography.body2,(0,i.A)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(d)},67570:function(e,t,n){var a=n(96540),i=n(64283),r=n(52969),s=n(54206),o=n(92961),l=n(64410),c=n(28689),u=n(49067),d=n(8787),m=n(40646),h=n(60274),p=n(86377),f=n(59503),v=n(27929),g=n(24656),E=n(36894),_=n(69818),A=n(40362);const b=E.default.div.withConfig({displayName:"CourseOptionsEditor__Row",componentId:"sc-15i8a3h-0"})(["margin-bottom:1.5rem;"]),C=E.default.form.withConfig({displayName:"CourseOptionsEditor__Form",componentId:"sc-15i8a3h-1"})([""]),k=E.default.div.withConfig({displayName:"CourseOptionsEditor__InfoBox",componentId:"sc-15i8a3h-2"})(["margin-bottom:2rem;"]),x=E.default.div.withConfig({displayName:"CourseOptionsEditor__FormContainer",componentId:"sc-15i8a3h-3"})(["height:100%;margin-top:2rem;"]),y=(0,E.default)(i.A).withConfig({displayName:"CourseOptionsEditor__WarningBox",componentId:"sc-15i8a3h-4"})(["margin:2rem 0;background:#f1a9a0;padding:1rem;font-weight:bold;"]);class w extends a.Component{constructor(){super(...arguments),this.onClick=async e=>{e.preventDefault(),this.setState({submitting:!0});let t={digital_education_for_all:this.state.digital_education_for_all,use_course_variant:this.state.use_course_variant,course_variant:this.state.course_variant,marketing:this.state.marketing,research:this.state.research};const n={first_name:this.state.first_name,last_name:this.state.last_name,organizational_id:this.state.student_number};try{await(0,v.DG)({extraFields:t,userField:n}),this.setState({submitting:!1}),this.props.onComplete()}catch(a){this.setState({errorObj:a,submitting:!1})}},this.state={submitting:!1,error:!0,errorObj:void 0,digital_education_for_all:!1,marketing:!1,research:void 0,first_name:void 0,last_name:void 0,use_course_variant:void 0,course_variant:"",course_variants:[],email:void 0,student_number:void 0,loading:!0,focused:null},this.handleInput=e=>{const t=e.target.name,n=e.target.value;this.setState({[t]:n},(()=>{this.validate()}))},this.handleCheckboxInput=e=>{const t=e.target.name,n=e.target.checked;this.setState({[t]:n},(()=>{this.validate()}))},this.handleCourseVariantCheckbox=e=>{this.setState({use_course_variant:e.target.checked,course_variant:""},(()=>{this.validate()}))},this.handleFocus=e=>{const t=e.target.name;this.setState({focused:t})},this.handleUnFocus=()=>{this.setState({focused:null})},this.validate=()=>{this.setState((e=>{const t=void 0===e.research,n=e.use_course_variant&&!e.course_variant;return{error:t||n}}))}}async componentDidMount(){var e,t,n,a,i,r,s,o,l;const c=await(0,v.yS)(),u=await(0,v.GF)();let d="t"===(null===(e=c.extra_fields)||void 0===e?void 0:e.use_course_variant),m=null!==(t=null===(n=c.extra_fields)||void 0===n?void 0:n.course_variant)&&void 0!==t?t:"";u.find((e=>e.key===m))||(d=!1,m=""),this.setState({first_name:null===(a=c.user_field)||void 0===a?void 0:a.first_name,last_name:null===(i=c.user_field)||void 0===i?void 0:i.last_name,email:c.email,student_number:null===(r=c.user_field)||void 0===r?void 0:r.organizational_id,digital_education_for_all:"t"===(null===(s=c.extra_fields)||void 0===s?void 0:s.digital_education_for_all),use_course_variant:d,course_variant:m,course_variants:u,marketing:"t"===(null===(o=c.extra_fields)||void 0===o?void 0:o.marketing),research:null===(l=c.extra_fields)||void 0===l?void 0:l.research,loading:!1},(()=>{this.validate()}))}render(){return a.createElement(x,null,a.createElement(g.A,{loading:this.state.loading,heightHint:"490px"},a.createElement(k,null,a.createElement(i.A,null,a.createElement(r.A,null,this.props.t("loggedInWith"),this.state.email)))),a.createElement("h1",null,this.props.t("studentInfo")),a.createElement(C,null,a.createElement(k,null,this.props.t("aboutYourself")),a.createElement(g.A,{loading:this.state.loading,heightHint:"490px"},a.createElement("div",null,a.createElement(b,null,a.createElement(s.A,{variant:"outlined",type:"text",label:this.props.t("firstName"),autoComplete:"given-name",name:"first_name",InputLabelProps:{shrink:this.state.first_name||"first_name"===this.state.focused},fullWidth:!0,value:this.state.first_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(b,null,a.createElement(s.A,{variant:"outlined",type:"text",label:this.props.t("lastName"),autoComplete:"family-name",name:"last_name",InputLabelProps:{shrink:this.state.last_name||"last_name"===this.state.focused},fullWidth:!0,value:this.state.last_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(b,null,a.createElement(s.A,{variant:"outlined",type:"text",label:this.props.t("sid"),name:"student_number",InputLabelProps:{shrink:this.state.student_number||"student_number"===this.state.focused},fullWidth:!0,value:this.state.student_number,onChange:this.handleInput,helperText:this.props.t("nosid"),onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(b,null,a.createElement(o.A,{control:a.createElement(l.A,{checked:this.state.digital_education_for_all,onChange:this.handleCheckboxInput,name:"digital_education_for_all",value:"1"}),label:"Olen tällä hetkellä opiskelijana Digital Education for All -hankkeessa. Jätä tämä valitsematta mikäli et tiedä kyseisestä hankkeesta."})),a.createElement(b,null,a.createElement(o.A,{control:a.createElement(l.A,{checked:this.state.marketing,onChange:this.handleCheckboxInput,name:"marketing",value:"1"}),label:this.props.t("marketing")})),0===this.state.course_variants.length?null:a.createElement("div",null,a.createElement("h2",null,this.props.t("courseInfo")),a.createElement(b,null,a.createElement(o.A,{control:a.createElement(l.A,{checked:this.state.use_course_variant,onChange:this.handleCourseVariantCheckbox,name:"use_course_variant",value:"1"}),disabled:0===this.state.course_variants.length,label:this.props.t("useCourseVariantLabel")})),a.createElement(b,null,a.createElement(c.A,{fullWidth:!0,variant:"outlined"},a.createElement(u.A,{id:"select-course",shrink:this.state.course_variant||"course_variant"===this.state.focused},this.props.t("courseVariant")),a.createElement(d.A,{key:this.state.use_course_variant,disabled:!this.state.use_course_variant,labelId:"select-course",label:this.props.t("courseVariant"),name:"course_variant",value:this.state.course_variant,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus},a.createElement(m.A,{value:"",disabled:!0},this.props.t("chooseCourse")),this.state.course_variants.map((e=>{const t=e.tmcOrganization+"-"+e.tmcCourse;return a.createElement(m.A,{value:t,key:t},e.organizationName,": ",e.title)})))))))),a.createElement("h2",null,this.props.t("researchTitle")),a.createElement("p",null,this.props.t("research1")),a.createElement("ol",null,a.createElement("li",null,this.props.t("research2")),a.createElement("li",null,this.props.t("research3")),a.createElement("li",null,this.props.t("research4"))),a.createElement("p",null,this.props.t("research5"),a.createElement("a",{href:"https://dl.acm.org/citation.cfm?id=2858798",target:"_blank",rel:"noopener noreferrer"},"Educational Data Mining and Learning Analytics in Programming: Literature Review and Case Studies"),"."),a.createElement("p",null,this.props.t("research6")),a.createElement("p",null,this.props.t("research7")),a.createElement(b,null,a.createElement(g.A,{loading:this.state.loading,heightHint:"115px"},a.createElement(h.A,{"aria-label":this.props.t("researchAgree"),name:"research",value:this.state.research,onChange:this.handleInput},a.createElement(o.A,{value:"1",control:a.createElement(p.A,{color:"primary"}),label:this.props.t("researchYes")}),a.createElement(o.A,{value:"0",control:a.createElement(p.A,null),label:this.props.t("researchNo")})))),a.createElement(b,null,a.createElement(f.A,{onClick:this.onClick,disabled:this.state.submitting||this.state.error,loading:this.state.submitting,variant:"contained",color:"primary",fullWidth:!0},this.props.t("save")))),this.state.error&&a.createElement(k,null,a.createElement("b",null,this.props.t("fillRequired"))),this.state.errorObj&&a.createElement(y,null,this.state.errorObj.toString()))}}t.A=(0,A.C)("common")((0,_.A)(w))},9561:function(e,t,n){n.r(t);var a=n(96540),i=n(93673),r=n(36894),s=n(67997),o=n(67570),l=n(41015),c=n(77744),u=n(79875),d=n(27929),m=n(90481),h=n(14978),p=n(65901),f=n(54129);const v=(0,r.default)(f.A).withConfig({displayName:"profile__StyledSnackbarContent",componentId:"sc-3be922-0"})(["background-color:#43a047 !important;"]),g=(0,r.default)(m.g).withConfig({displayName:"profile__StyledIcon",componentId:"sc-3be922-1"})(["margin-right:0.5rem;"]);class E extends a.Component{constructor(){super(...arguments),this.state={successMessage:null},this.onStepComplete=()=>{this.setState({successMessage:"Tiedot tallennettu!"})},this.handleClose=()=>{this.setState({successMessage:null})}}async componentDidMount(){var e;if(!this.context.loggedIn)return;let t=await(0,d.Qv)();void 0===(null==t||null===(e=t.extra_fields)||void 0===e?void 0:e.research)&&(0,l.navigate)("/missing-info")}render(){return this.context.loggedIn?a.createElement(s.A,null,a.createElement(u.A,null,a.createElement(i.A,{title:"Profiili"}),a.createElement("h1",null,"Profiili"),a.createElement("p",null,"Täällä voit muokata mooc.fi -tilisi asetuksia tämän kurssin osalta. Katso myös profiilisi mooc.fi:n Test My Code -palvelussa:"," ",a.createElement("a",{href:"https://tmc.mooc.fi",rel:"noopener noreferrer"},"https://tmc.mooc.fi"),"."),a.createElement(o.A,{onComplete:this.onStepComplete})),a.createElement(p.A,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.successMessage,autoHideDuration:6e3,onClose:this.handleClose},a.createElement(v,{variant:"success",message:a.createElement(a.Fragment,null,a.createElement(g,{icon:h.SGM})," ",a.createElement("span",null,this.state.successMessage))}))):("undefined"!=typeof window&&(0,l.navigate)("/sign-in"),a.createElement("div",null,"Redirecting..."))}}E.contextType=c.Ay,t.default=(0,c.ko)(E)}}]);
//# sourceMappingURL=component---src-pages-profile-js-9dd8d6f545cf5a8539e5.js.map