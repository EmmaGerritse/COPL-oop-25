"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[906],{85687:function(e,t,n){n.r(t);var i=n(96540),s=n(93673),o=n(67997),r=n(27929),a=n(41015),l=n(54206),m=n(59503),c=n(40362),u=n(36894),p=n(77744),h=n(79875);const d=u.default.div.withConfig({displayName:"sign-in__Row",componentId:"sc-1r0lptz-0"})(["margin-bottom:1.5rem;"]),g=u.default.form.withConfig({displayName:"sign-in__Form",componentId:"sc-1r0lptz-1"})([""]),f=u.default.div.withConfig({displayName:"sign-in__InfoBox",componentId:"sc-1r0lptz-2"})(["margin-bottom:2rem;"]),w=u.default.div.withConfig({displayName:"sign-in__FormContainer",componentId:"sc-1r0lptz-3"})(["height:100%;margin-top:2rem;"]);class E extends i.Component{constructor(){super(...arguments),this.componentDidMount=()=>{this.fallbackRedirector=setInterval((()=>{(0,r.eY)()&&setTimeout((()=>{"/sign-in/"!==window.location.pathname&&"/sign-in"!==window.location.pathname||(window.location="/")}),2e3)}),1e3)},this.onClick=async e=>{if(e.preventDefault(),!(this.state.submitting||0===this.state.email.length&&0===this.state.password.length)){this.setState({submitting:!0,error:!1});try{await(0,r.QF)({username:this.state.email,password:this.state.password}),setTimeout((()=>{try{if("undefined"!=typeof window)return void window.history.go(-1);(0,a.navigate)("/")}catch(e){(0,a.navigate)("/")}}),100)}catch(t){return void this.setState({error:!0,submitting:!1})}}},this.state={email:"",password:"",submitting:!1,error:!1}}componentWillUnmount(){clearInterval(this.fallbackRedirector)}render(){return this.context.loggedIn&&!this.state.submitting?((0,a.navigate)("/"),i.createElement("div",null,"Redirecting....")):i.createElement(o.A,null,i.createElement(h.A,null,i.createElement(s.A,{title:this.props.t("common:login")}),i.createElement(w,null,i.createElement("h1",null,this.props.t("common:login")),i.createElement(g,null,i.createElement(f,null,this.props.t("user:courseUses")," ",i.createElement("a",{href:"https://mooc.fi",target:"_blank",rel:"noopener noreferrer"},"mooc.fi")," ",this.props.t("user:courseUses2")),i.createElement(d,null,i.createElement(l.A,{id:"outlined-adornment-email",variant:"outlined",type:"text",label:this.props.t("user:emailUsername"),fullWidth:!0,value:this.state.email,onChange:e=>this.setState({email:e.target.value})})),i.createElement(d,null,i.createElement(l.A,{id:"outlined-adornment-password",variant:"outlined",type:this.state.showPassword?"text":"password",label:this.props.t("user:password"),fullWidth:!0,value:this.state.password,onChange:e=>this.setState({password:e.target.value})})),i.createElement(d,null,i.createElement(m.A,{onClick:this.onClick,disabled:this.state.submitting,variant:"contained",color:"primary",fullWidth:!0,type:"submit"},this.props.t("common:login")))),this.state.error&&i.createElement(f,null,i.createElement("b",null,this.props.t("user:wrongDetails"))),i.createElement(d,null,i.createElement(a.Link,{to:"/sign-up"},this.props.t("user:createAccount"))),i.createElement(d,null,i.createElement("a",{href:"https://tmc.mooc.fi/password_reset_keys/new",target:"_blank",rel:"noopener noreferrer"},this.props.t("user:forgottenPW"))))))}}E.contextType=p.Ay,t.default=(0,c.C)(["common","user"])((0,p.ko)(E))}}]);
//# sourceMappingURL=component---src-pages-sign-in-js-d3d38d3e1c3b238caae8.js.map