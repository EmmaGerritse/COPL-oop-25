"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[332],{67570:function(e,t,a){var s=a(96540),n=a(64283),r=a(52969),i=a(54206),o=a(92961),l=a(64410),h=a(28689),c=a(49067),u=a(8787),m=a(40646),d=a(60274),p=a(86377),_=a(59503),v=a(27929),g=a(24656),f=a(36894),E=a(69818),b=a(40362);const C=f.default.div.withConfig({displayName:"CourseOptionsEditor__Row",componentId:"sc-15i8a3h-0"})(["margin-bottom:1.5rem;"]),w=f.default.form.withConfig({displayName:"CourseOptionsEditor__Form",componentId:"sc-15i8a3h-1"})([""]),A=f.default.div.withConfig({displayName:"CourseOptionsEditor__InfoBox",componentId:"sc-15i8a3h-2"})(["margin-bottom:2rem;"]),k=f.default.div.withConfig({displayName:"CourseOptionsEditor__FormContainer",componentId:"sc-15i8a3h-3"})(["height:100%;margin-top:2rem;"]),y=(0,f.default)(n.A).withConfig({displayName:"CourseOptionsEditor__WarningBox",componentId:"sc-15i8a3h-4"})(["margin:2rem 0;background:#f1a9a0;padding:1rem;font-weight:bold;"]);class S extends s.Component{constructor(){super(...arguments),this.onClick=async e=>{e.preventDefault(),this.setState({submitting:!0});let t={digital_education_for_all:this.state.digital_education_for_all,use_course_variant:this.state.use_course_variant,course_variant:this.state.course_variant,marketing:this.state.marketing,research:this.state.research};const a={first_name:this.state.first_name,last_name:this.state.last_name,organizational_id:this.state.student_number};try{await(0,v.DG)({extraFields:t,userField:a}),this.setState({submitting:!1}),this.props.onComplete()}catch(s){this.setState({errorObj:s,submitting:!1})}},this.state={submitting:!1,error:!0,errorObj:void 0,digital_education_for_all:!1,marketing:!1,research:void 0,first_name:void 0,last_name:void 0,use_course_variant:void 0,course_variant:"",course_variants:[],email:void 0,student_number:void 0,loading:!0,focused:null},this.handleInput=e=>{const t=e.target.name,a=e.target.value;this.setState({[t]:a},(()=>{this.validate()}))},this.handleCheckboxInput=e=>{const t=e.target.name,a=e.target.checked;this.setState({[t]:a},(()=>{this.validate()}))},this.handleCourseVariantCheckbox=e=>{this.setState({use_course_variant:e.target.checked,course_variant:""},(()=>{this.validate()}))},this.handleFocus=e=>{const t=e.target.name;this.setState({focused:t})},this.handleUnFocus=()=>{this.setState({focused:null})},this.validate=()=>{this.setState((e=>{const t=void 0===e.research,a=e.use_course_variant&&!e.course_variant;return{error:t||a}}))}}async componentDidMount(){var e,t,a,s,n,r,i,o,l;const h=await(0,v.yS)(),c=await(0,v.GF)();let u="t"===(null===(e=h.extra_fields)||void 0===e?void 0:e.use_course_variant),m=null!==(t=null===(a=h.extra_fields)||void 0===a?void 0:a.course_variant)&&void 0!==t?t:"";c.find((e=>e.key===m))||(u=!1,m=""),this.setState({first_name:null===(s=h.user_field)||void 0===s?void 0:s.first_name,last_name:null===(n=h.user_field)||void 0===n?void 0:n.last_name,email:h.email,student_number:null===(r=h.user_field)||void 0===r?void 0:r.organizational_id,digital_education_for_all:"t"===(null===(i=h.extra_fields)||void 0===i?void 0:i.digital_education_for_all),use_course_variant:u,course_variant:m,course_variants:c,marketing:"t"===(null===(o=h.extra_fields)||void 0===o?void 0:o.marketing),research:null===(l=h.extra_fields)||void 0===l?void 0:l.research,loading:!1},(()=>{this.validate()}))}render(){return s.createElement(k,null,s.createElement(g.A,{loading:this.state.loading,heightHint:"490px"},s.createElement(A,null,s.createElement(n.A,null,s.createElement(r.A,null,this.props.t("loggedInWith"),this.state.email)))),s.createElement("h1",null,this.props.t("studentInfo")),s.createElement(w,null,s.createElement(A,null,this.props.t("aboutYourself")),s.createElement(g.A,{loading:this.state.loading,heightHint:"490px"},s.createElement("div",null,s.createElement(C,null,s.createElement(i.A,{variant:"outlined",type:"text",label:this.props.t("firstName"),autoComplete:"given-name",name:"first_name",InputLabelProps:{shrink:this.state.first_name||"first_name"===this.state.focused},fullWidth:!0,value:this.state.first_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),s.createElement(C,null,s.createElement(i.A,{variant:"outlined",type:"text",label:this.props.t("lastName"),autoComplete:"family-name",name:"last_name",InputLabelProps:{shrink:this.state.last_name||"last_name"===this.state.focused},fullWidth:!0,value:this.state.last_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),s.createElement(C,null,s.createElement(i.A,{variant:"outlined",type:"text",label:this.props.t("sid"),name:"student_number",InputLabelProps:{shrink:this.state.student_number||"student_number"===this.state.focused},fullWidth:!0,value:this.state.student_number,onChange:this.handleInput,helperText:this.props.t("nosid"),onFocus:this.handleFocus,onBlur:this.handleUnFocus})),s.createElement(C,null,s.createElement(o.A,{control:s.createElement(l.A,{checked:this.state.digital_education_for_all,onChange:this.handleCheckboxInput,name:"digital_education_for_all",value:"1"}),label:"Olen tällä hetkellä opiskelijana Digital Education for All -hankkeessa. Jätä tämä valitsematta mikäli et tiedä kyseisestä hankkeesta."})),s.createElement(C,null,s.createElement(o.A,{control:s.createElement(l.A,{checked:this.state.marketing,onChange:this.handleCheckboxInput,name:"marketing",value:"1"}),label:this.props.t("marketing")})),0===this.state.course_variants.length?null:s.createElement("div",null,s.createElement("h2",null,this.props.t("courseInfo")),s.createElement(C,null,s.createElement(o.A,{control:s.createElement(l.A,{checked:this.state.use_course_variant,onChange:this.handleCourseVariantCheckbox,name:"use_course_variant",value:"1"}),disabled:0===this.state.course_variants.length,label:this.props.t("useCourseVariantLabel")})),s.createElement(C,null,s.createElement(h.A,{fullWidth:!0,variant:"outlined"},s.createElement(c.A,{id:"select-course",shrink:this.state.course_variant||"course_variant"===this.state.focused},this.props.t("courseVariant")),s.createElement(u.A,{key:this.state.use_course_variant,disabled:!this.state.use_course_variant,labelId:"select-course",label:this.props.t("courseVariant"),name:"course_variant",value:this.state.course_variant,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus},s.createElement(m.A,{value:"",disabled:!0},this.props.t("chooseCourse")),this.state.course_variants.map((e=>{const t=e.tmcOrganization+"-"+e.tmcCourse;return s.createElement(m.A,{value:t,key:t},e.organizationName,": ",e.title)})))))))),s.createElement("h2",null,this.props.t("researchTitle")),s.createElement("p",null,this.props.t("research1")),s.createElement("ol",null,s.createElement("li",null,this.props.t("research2")),s.createElement("li",null,this.props.t("research3")),s.createElement("li",null,this.props.t("research4"))),s.createElement("p",null,this.props.t("research5"),s.createElement("a",{href:"https://dl.acm.org/citation.cfm?id=2858798",target:"_blank",rel:"noopener noreferrer"},"Educational Data Mining and Learning Analytics in Programming: Literature Review and Case Studies"),"."),s.createElement("p",null,this.props.t("research6")),s.createElement("p",null,this.props.t("research7")),s.createElement(C,null,s.createElement(g.A,{loading:this.state.loading,heightHint:"115px"},s.createElement(d.A,{"aria-label":this.props.t("researchAgree"),name:"research",value:this.state.research,onChange:this.handleInput},s.createElement(o.A,{value:"1",control:s.createElement(p.A,{color:"primary"}),label:this.props.t("researchYes")}),s.createElement(o.A,{value:"0",control:s.createElement(p.A,null),label:this.props.t("researchNo")})))),s.createElement(C,null,s.createElement(_.A,{onClick:this.onClick,disabled:this.state.submitting||this.state.error,loading:this.state.submitting,variant:"contained",color:"primary",fullWidth:!0},this.props.t("save")))),this.state.error&&s.createElement(A,null,s.createElement("b",null,this.props.t("fillRequired"))),this.state.errorObj&&s.createElement(y,null,this.state.errorObj.toString()))}}t.A=(0,b.C)("common")((0,E.A)(S))},45270:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var s=a(96540),n=a(93673),r=a(67997),i=a(41015),o=a(54206),l=a(59503),h=a(27929),c=a(40670),u=a(40362),m=a(36894),d=a(69818);const p=m.default.div.withConfig({displayName:"CreateAccountForm__Row",componentId:"jadb0u-0"})(["margin-bottom:1.5rem;"]),_=m.default.form.withConfig({displayName:"CreateAccountForm__Form",componentId:"jadb0u-1"})([""]),v=m.default.div.withConfig({displayName:"CreateAccountForm__InfoBox",componentId:"jadb0u-2"})(["margin-bottom:2rem;"]),g=m.default.div.withConfig({displayName:"CreateAccountForm__FormContainer",componentId:"jadb0u-3"})(["height:100%;margin-top:2rem;"]);class f extends s.Component{constructor(){super(...arguments),this.onClick=async e=>{if(e.preventDefault(),this.setState({submitting:!0,triedSubmitting:!0}),this.validate())try{await(0,h._m)({email:this.state.email,password:this.state.password,password_confirmation:this.state.password_confirmation}),await(0,h.QF)({username:this.state.email,password:this.state.password}),this.props.onComplete()}catch(t){try{let e="";Object.entries(t).forEach((t=>{const a=t[0];t[1].forEach((t=>{let s=(0,c.Zr)(a.replace(/_/g," ")+" "+t+".");"Email has already been taken."===s&&(s=this.props.t("emailInUse")),e=e+" "+s}))})),""===e&&(e=this.props.t("problemCreatingAccount")+JSON.stringify(t)),this.setState({error:e,submitting:!1,errorObj:t})}catch(a){this.setState({error:JSON.stringify(t),submitting:!1})}this.setState({submitting:!1})}else this.setState({canSubmit:!1,submitting:!1})},this.handleInput=e=>{const t=e.target.name,a=e.target.value;this.setState({[t]:a},(()=>{this.validate()}))},this.validate=()=>{let e={error:"",errorObj:{}};const{email:t,password:a,password_confirmation:s,validatePassword:n,validateEmail:r,triedSubmitting:i}=this.state;return t&&r&&(-1===t.indexOf("@")&&(e.error+=this.props.t("noAt"),e.errorObj.email=this.props.t("noAt")),t&&-1===t.indexOf(".")&&(e.error+=this.props.t("noAt"),e.errorObj.email=this.props.t("noAt"))),a&&s&&n&&a!==s&&(e.error+=this.props.t("passwordsNoMatch"),e.errorObj.password=this.props.t("passwordsNoMatch"),e.errorObj.password_confirmation=this.props.t("passwordsNoMatch")),""===e.error&&(e.error=!1,e.canSubmit=!0),t&&a&&s?(this.setState(e),!e.error):(i&&(e.canSubmit=!1),!1)},this.state={email:void 0,password:void 0,password_confirmation:void 0,submitting:!1,error:!1,errorObj:{},validatePassword:!1,validateEmail:!1,canSubmit:!0,triedSubmitting:!0}}render(){return this.context.loggedIn?((0,i.navigate)("/"),s.createElement("div",null,"Redirecting...")):s.createElement(g,null,s.createElement("h1",null,this.props.t("createAccount")),s.createElement(_,{onChange:this.validate},s.createElement(v,null,this.props.t("courseUses")," ",s.createElement("a",{href:"https://mooc.fi",target:"_blank",rel:"noopener noreferrer"},"mooc.fi")," ",this.props.t("courseUses2")),s.createElement(p,null,s.createElement(o.A,{variant:"outlined",type:"email",name:"email",autoComplete:"email",label:this.props.t("email"),error:this.state.errorObj.email,fullWidth:!0,value:this.state.email,onChange:this.handleInput,onBlur:()=>{this.setState({validateEmail:!0},(()=>{this.validate()}))}})),s.createElement(p,null,s.createElement(o.A,{variant:"outlined",type:this.state.showPassword?"text":"password",label:this.props.t("password"),name:"password",error:this.state.errorObj.password,fullWidth:!0,value:this.state.password,onChange:this.handleInput})),s.createElement(p,null,s.createElement(o.A,{variant:"outlined",type:this.state.showPassword?"text":"password",label:this.props.t("passwordAgain"),name:"password_confirmation",error:this.state.errorObj.password_confirmation,fullWidth:!0,value:this.state.password_confirmation,onChange:this.handleInput,onBlur:()=>{this.setState({validatePassword:!0},(()=>{this.validate()}))}})),s.createElement(p,null,s.createElement(l.A,{onClick:this.onClick,disabled:this.state.submitting||!this.state.canSubmit,variant:"contained",color:"primary",fullWidth:!0,type:"submit"},this.props.t("create")))),s.createElement(p,null,s.createElement(i.Link,{to:"/sign-in"},this.props.t("alreadyHaveAccount"))),this.state.error&&s.createElement(v,null,s.createElement("b",null,this.props.t("error")," ",this.state.error)))}}var E=(0,u.C)("user")((0,d.A)(f)),b=a(67570),C=a.p+"static/email-example-dfbd631229d83018bc9fcaba5fffd852.png";const w=m.default.div.withConfig({displayName:"ConfirmEmail__InfoBox",componentId:"sc-1t4zqh3-0"})(["margin-bottom:2rem;"]),A=m.default.div.withConfig({displayName:"ConfirmEmail__FormContainer",componentId:"sc-1t4zqh3-1"})(["height:100%;margin-top:2rem;"]),k=m.default.img.withConfig({displayName:"ConfirmEmail__StyledImage",componentId:"sc-1t4zqh3-2"})(["width:100%;padding:1rem 0;"]);class y extends s.Component{constructor(){super(...arguments),this.onClick=async e=>{e.preventDefault()},this.state={email:void 0,password:void 0,submitting:!1,error:!1}}render(){return s.createElement(A,null,s.createElement("h1",null,this.props.t("welcomeToCourse")),s.createElement(w,null,s.createElement("p",null,this.props.t("emailSent")," "),s.createElement("p",null,this.props.t("emailExample")),s.createElement(k,{src:C,alt:this.props.t("emaiLExampleAria")})),s.createElement("p",null,this.props.t("nowContinue")," ",s.createElement(i.Link,{to:"/osa-1"},this.props.t("toMaterial")),"."))}}var S=(0,u.C)("user")((0,d.A)(y)),I=a(77744),x=a(79875);class F extends s.Component{constructor(){super(...arguments),this.state={step:1},this.onStepComplete=()=>{this.setState((e=>({step:e.step+1}))),"undefined"!=typeof window&&window.scrollTo(0,0)}}render(){let e;return e=1===this.state.step?s.createElement(E,{onComplete:this.onStepComplete}):2===this.state.step?s.createElement(b.A,{courseVariant:"nodl",onComplete:this.onStepComplete}):s.createElement(S,{onComplete:this.onStepComplete}),s.createElement(r.A,null,s.createElement(n.A,{title:"Luo käyttäjätunnus"}),s.createElement(x.A,null,e))}}F.contextType=I.Ay;var O=(0,I.ko)(F)}}]);
//# sourceMappingURL=component---src-pages-sign-up-js-f9d6c9fea9bbfef353dd.js.map